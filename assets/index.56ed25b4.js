import{r as d,w as Z,a as V,o as _,c as T,b as f,d as $,e as i,n as F,f as r,g as J,h as S,t as I,T as j,i as ee,j as B,u as D,F as E,k as L,E as U,l as te,m as A,p as le,q as oe,s as ae,v as se,_ as ne,x as ie,y as re,z as ue}from"./vendor.f36a439f.js";const ce=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))e(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const p of s.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&e(p)}).observe(document,{childList:!0,subtree:!0});function n(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerpolicy&&(s.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?s.credentials="include":l.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function e(l){if(l.ep)return;l.ep=!0;const s=n(l);fetch(l.href,s)}};ce();const de={key:0,class:"modal"},_e={class:"modal_inner"},fe={class:"modal_content"},pe={class:"form_group"},me={class:"form_group"},ve=i("div",{class:"title"},"\u5099\u8A3B",-1),ge={class:"modal_footer"},ke=S("\u522A\u9664"),ye=S("\u95DC\u9589"),he={props:{is_open:{type:Boolean,default:!1,required:!0},is_create:{type:Boolean,default:!0},data:{type:Object,default:{},required:!1}},emits:["ticket_add","ticket_save","ticket_delete","modal_close"],setup(N,{emit:a}){const n=N,e=d({title:"",remark:""}),l=d(!1);Z(()=>{n.is_create||(e.value=JSON.parse(JSON.stringify(n.data)))});function s(){e.value.title.length===0?l.value=!0:(n.is_create?a("ticket_add",e.value):a("ticket_save",e.value),b())}function p(){a("ticket_delete",e.value),b()}function h(){a("modal_close"),b()}function b(){e.value={title:"",remark:""},l.value=!1}return(k,u)=>{const C=V("el-input"),c=V("el-button");return _(),T(j,{name:"fade"},{default:f(()=>[n.is_open?(_(),$("div",de,[i("div",_e,[i("div",fe,[i("div",pe,[i("div",{class:F(["title required",{has_error:l.value}])},"\u4E8B\u9805",2),r(C,{modelValue:e.value.title,"onUpdate:modelValue":u[0]||(u[0]=g=>e.value.title=g),maxlength:"50"},null,8,["modelValue"])]),i("div",me,[ve,r(C,{modelValue:e.value.remark,"onUpdate:modelValue":u[1]||(u[1]=g=>e.value.remark=g),maxlength:"500",type:"textarea",rows:2},null,8,["modelValue"])])]),i("div",ge,[N.is_create?J("",!0):(_(),T(c,{key:0,type:"danger",onClick:u[2]||(u[2]=g=>p())},{default:f(()=>[ke]),_:1})),r(c,{type:"primary",onClick:u[3]||(u[3]=g=>s())},{default:f(()=>[S(I(n.is_create?"\u65B0\u589E":"\u4FDD\u5B58"),1)]),_:1}),r(c,{type:"primary",onClick:u[4]||(u[4]=g=>h())},{default:f(()=>[ye]),_:1})])])])):J("",!0)]),_:1})}}},$e={key:0,class:"modal"},Ve={class:"modal_inner"},Se={class:"modal_content"},be={class:"form_group"},Ce={class:"modal_footer"},Ne=S("\u65B0\u589E"),we=S("\u95DC\u9589"),Oe={props:{is_open:{type:Boolean,default:!1,required:!0}},emits:["status_add","modal_close"],setup(N,{emit:a}){const n=N,e=d(""),l=d(!1);function s(){e.value.length===0?l.value=!0:(a("status_add",e.value),h())}function p(){a("modal_close"),h()}function h(){e.value="",l.value=!1}return(b,k)=>{const u=V("el-input"),C=V("el-button");return _(),T(j,{name:"fade"},{default:f(()=>[n.is_open?(_(),$("div",$e,[i("div",Ve,[i("div",Se,[i("div",be,[i("div",{class:F(["title required",{has_error:l.value}])},"\u72C0\u614B",2),r(u,{modelValue:e.value,"onUpdate:modelValue":k[0]||(k[0]=c=>e.value=c),maxlength:"50"},null,8,["modelValue"])])]),i("div",Ce,[r(C,{type:"primary",onClick:k[1]||(k[1]=c=>s())},{default:f(()=>[Ne]),_:1}),r(C,{type:"primary",onClick:k[2]||(k[2]=c=>p())},{default:f(()=>[we]),_:1})])])])):J("",!0)]),_:1})}}};const De={class:"header"},Ie=S("\u65B0\u589E\u4E8B\u9805"),Te=S("\u65B0\u589E\u72C0\u614B"),xe=S("\u6E05\u7A7A\u4E8B\u9805"),Be={class:"container"},Ee=["onDrop"],Je={class:"status_title"},qe={key:1},Me=["onDragstart","onClick"],Le={class:"plan_list_title"},Ue={setup(N){const a=d(["\u5F85\u8FA6\u4E8B\u9805","\u9032\u884C\u4E2D","\u5DF2\u5B8C\u6210"]),n=d([!1,!1,!1]),e=d([]),l=d(1);ee(()=>{localStorage.getItem("status")&&(a.value=JSON.parse(localStorage.getItem("status"))),localStorage.getItem("tickets")&&(e.value=JSON.parse(localStorage.getItem("tickets"))),localStorage.getItem("ticket_next_id")&&(l.value=JSON.parse(localStorage.getItem("ticket_next_id")))}),B(a,(o,t)=>{localStorage.setItem("status",JSON.stringify(a.value))},{deep:!0}),B(e,(o,t)=>{localStorage.setItem("tickets",JSON.stringify(e.value))},{deep:!0}),B(l,(o,t)=>{localStorage.setItem("ticket_next_id",JSON.stringify(l.value))},{deep:!0});const s=d(!1),p=d(!0),h=d({});function b(o=!0,t={}){s.value=!0,!o&&(h.value=t,p.value=!1)}function k(o){var w;c();const y={id:l.value,title:o.title,remark:(w=o.remark)!=null?w:"",list:1};e.value.push(y),l.value+=1}function u(o){c(),e.value.forEach(t=>{t.id===o.id&&Object.assign(t,o)})}function C(o){c(),e.value=e.value.filter(t=>t.id!==o.id)}function c(){s.value=!1,p.value=!0,h.value={}}const g=d(!1);function P(){g.value=!0}function K(o){q(),a.value.push(o),n.value.push(!1)}function q(){g.value=!1}function G(o){return e.value.filter(t=>t.list==o)}function H(o,t){o.dataTransfer.dropEffect="move",o.dataTransfer.effectAllowed="move",o.dataTransfer.setData("listID",t.id)}function Q(o,t){const y=o.dataTransfer.getData("listID"),w=e.value.find(x=>x.id==y);w.list=t}function R(){e.value=[],l.value=1,U({message:"\u4E8B\u9805\u6E05\u7A7A\u6210\u529F\uFF01",type:"success"})}function W(o){ie.confirm("\u78BA\u5B9A\u8981\u522A\u9664\u6B64\u72C0\u614B\u55CE\uFF1F\u5E95\u4E0B\u6240\u6709\u4E8B\u9805\u4E5F\u5C07\u6703\u88AB\u6E05\u9664\uFF01","\u522A\u9664",{confirmButtonText:"\u78BA\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{e.value=e.value.filter(t=>t.list!==o+1),a.value.splice(o,1),n.value.splice(o,1),U({message:"\u72C0\u614B\u522A\u9664\u6210\u529F\uFF01",type:"success"})}).catch(()=>{})}function X(o,t){n.value[o]=t}return(o,t)=>{const y=V("el-button"),w=V("el-popconfirm"),x=V("el-input"),Y=V("el-button-group");return _(),$(E,null,[i("div",De,[r(y,{type:"primary",onClick:t[0]||(t[0]=O=>b())},{default:f(()=>[Ie]),_:1}),r(y,{type:"primary",onClick:t[1]||(t[1]=O=>P())},{default:f(()=>[Te]),_:1}),r(w,{"confirm-button-text":"\u78BA\u5B9A","cancel-button-text":"\u53D6\u6D88",icon:D(te),"icon-color":"red",title:"\u78BA\u5B9A\u8981\u6E05\u7A7A\u6240\u6709\u4E8B\u9805\u55CE\uFF1F",onConfirm:t[2]||(t[2]=O=>R())},{reference:f(()=>[r(y,null,{default:f(()=>[xe]),_:1})]),_:1},8,["icon"])]),i("div",Be,[(_(!0),$(E,null,L(a.value,(O,m)=>(_(),$("div",{class:"plan_board",key:`plan_board_${m}`,onDrop:v=>Q(v,m+1),onDragenter:t[3]||(t[3]=A(()=>{},["prevent"])),onDragover:t[4]||(t[4]=A(()=>{},["prevent"]))},[i("div",Je,[n.value[m]?(_(),T(x,{key:0,modelValue:a.value[m],"onUpdate:modelValue":v=>a.value[m]=v,maxlength:"50"},null,8,["modelValue","onUpdate:modelValue"])):(_(),$("span",qe,I(O),1)),r(Y,null,{default:f(()=>[r(y,{type:"text",icon:n.value[m]?D(le):D(oe),onClick:v=>X(m,!n.value[m])},null,8,["icon","onClick"]),ae(r(y,{type:"text",icon:D(ne),onClick:v=>W(m)},null,8,["icon","onClick"]),[[se,!n.value[m]]])]),_:2},1024)]),(_(!0),$(E,null,L(G(m+1),v=>(_(),$("div",{class:"plan_list",key:v.id,draggable:"true",onDragstart:M=>H(M,v),onClick:M=>b(!1,v)},[i("span",Le,I(v.title),1),i("span",null,I(v.id),1)],40,Me))),128))],40,Ee))),128))]),r(he,{is_open:s.value,is_create:p.value,data:h.value,onTicket_add:k,onTicket_save:u,onTicket_delete:C,onModal_close:c},null,8,["is_open","is_create","data"]),r(Oe,{is_open:g.value,onStatus_add:K,onModal_close:q},null,8,["is_open"])],64)}}};const z=re(Ue);z.use(ue);z.mount("#app");
